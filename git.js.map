{"version":3,"file":"git.js","sources":["../src/myst-git/git.html?html-proxy&index=1.js"],"sourcesContent":["\n      import MystEditorGit from \"./MystEditorGit.jsx\";\n\n      const usercolors = [\"#30bced\", \"#60c771\", \"#e6aa3a\", \"#cbb63e\", \"#ee6352\", \"#9ac2c9\", \"#8acb88\", \"#14b2c4\"];\n      const urlParams = new URLSearchParams(window.location.search);\n      const username = urlParams.get(\"username\") || Math.floor(Math.random() * 1000).toString();\n      const color = usercolors[Math.floor(Math.random() * usercolors.length)];\n      let exampleCustomRoles = [\n        {\n          target: \"say\",\n          transform: async (content) => username + \" says: '\" + content + \"'\",\n        },\n      ];\n\n      let exampleCustomDirectives = [\n        {\n          target: \"bold\",\n          transform: (_, data) => `<b style=\"white-space: pre-wrap;\">${data.body}</b>`,\n        },\n      ];\n\n      let exampleTransforms = [\n        {\n          // Other repo issue links\n          target: /[0-9a-z\\-]+\\/[0-9a-z\\-]+#\\d{1,10}/g,\n          transform: (match) => {\n            const [repo, issueId] = match.split(\"#\");\n            return `<a href=\"https://github.com/${repo}/issues/${issueId}\">${match}</a>`;\n          },\n        },\n        {\n          // Other repo PR links\n          target: /[0-9a-z\\-]+\\/[0-9a-z\\-]+\\!\\d+/g,\n          transform: (match) => {\n            const [repo, prid] = match.split(\"!\");\n            return `<a href=\"https://github.com/${repo}/pull/${prid}\">${match}</a>`;\n          },\n        },\n        {\n          // Same repo issue links\n          target: /(^|(?<=\\s))#\\d+/g,\n          transform: (match) => {\n            const issueId = match.slice(1);\n            return `<a href=\"https://github.com/antmicro/myst-editor/issues/${issueId}\">${match}</a>`;\n          },\n        },\n        {\n          // Same repo PR links\n          target: /(^|(?<=\\s))!\\d+/g,\n          transform: (match) => {\n            const prid = match.slice(1);\n            return `<a href=\"https://github.com/antmicro/myst-editor/pull/${prid}\">${match}</a>`;\n          },\n        },\n        {\n          // User links\n          target: /@[0-9a-z\\-]+/g,\n          transform: (match) => {\n            const user = match.slice(1);\n            return `\n                <a href='https://github.com/${user}'>\n                  ${user}\n                </a>`;\n          },\n        },\n        {\n          target: /\\|date\\|/g,\n          transform: (match) => new Promise((r) => r(new Date().toLocaleString(\"en-GB\", { timeZone: \"UTC\" }))),\n        },\n      ];\n\n      const collabEnabled = !(import.meta.env.VITE_COLLAB == \"OFF\") && urlParams.get(\"collab\") != \"false\";\n      const collabUrl = import.meta.env.VITE_WS_URL ?? urlParams.get(\"collab_server\");\n      const branches = [\"main\", \"dev\"];\n      const commits = [\n        { message: \"commit 2\", hash: \"aaa\" },\n        { message: \"commit 1\", hash: \"bbb\" },\n      ];\n      const files = [\"docs/source/file1.md\", \"docs/source/file2.md\", \"docs/source/index.md\"];\n      const text = {\n        [\"docs/source/index.md\"]: `# {{project}}\n\n\\`\\`\\`{toctree}\nfile2\nfile1\n\\`\\`\\`\n`,\n        [\"docs/source/file1.md\"]: `# Document 1\\nline1\\nline2\\n## Heading2_1\\nline3\\n## Heading2_2\\nline4`,\n        [\"docs/source/file2.md\"]: `# Document 2\\nline1\\nline2\\n## Heading2_1\\nline3\\n## Heading2_2\\nline4`,\n      };\n\n      MystEditorGit(\n        {\n          repo: urlParams.get(\"repo\") ?? `repos/myst`,\n          initialBranches: branches,\n          getBranches: (page) => (page == 1 ? branches : []),\n          searchBranches: (input) => branches.filter((b) => b.includes(input)),\n          getCommits: (_, page) => (page == 1 ? commits : []),\n          searchCommits: (input) => commits.filter((c) => c.message.includes(input)),\n          getFiles: () => files,\n          getText: async (_, __, f) => text[f] ?? \"\",\n          storeHistory: () => {},\n          commitChanges: (msg) => ({ hash: \"ccc\", webUrl: \"#\" }),\n          id: \"demo\",\n          title: \"[MyST Editor](https://github.com/antmicro/myst-editor/) demo\",\n          transforms: exampleTransforms,\n          collaboration: {\n            enabled: collabEnabled,\n            commentsEnabled: collabEnabled,\n            resolvingCommentsEnabled: collabEnabled,\n            wsUrl: collabUrl ?? \"#\",\n            username,\n            color,\n            mode: collabUrl ? \"websocket\" : \"local\",\n          },\n          customRoles: exampleCustomRoles,\n          customDirectives: exampleCustomDirectives,\n          syncScroll: true,\n          index: \"docs/source/index.md\",\n          docsRoot: \"docs/source\",\n        },\n        document.getElementById(\"myst\"),\n      );\n    "],"names":["usercolors","urlParams","URLSearchParams","window","location","search","username","get","Math","floor","random","toString","color","length","exampleCustomRoles","target","transform","content","exampleCustomDirectives","_","data","body","exampleTransforms","match","repo","issueId","split","prid","slice","user","Promise","r","Date","toLocaleString","timeZone","collabEnabled","import","VITE_COLLAB","collabUrl","VITE_WS_URL","branches","commits","message","hash","files","text","MystEditorGit","initialBranches","getBranches","page","searchBranches","input","filter","b","includes","getCommits","searchCommits","c","getFiles","getText","__","f","storeHistory","commitChanges","msg","webUrl","id","title","transforms","collaboration","enabled","commentsEnabled","resolvingCommentsEnabled","wsUrl","mode","customRoles","customDirectives","syncScroll","index","docsRoot","document","getElementById"],"mappings":"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"}